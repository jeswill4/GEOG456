
<html>
    <head>
        <title>Homework 3</title> 
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin=""/>
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>
        <script src="./concert.js"></script>
    </head>

    <body>
    Clickable Music Venues in Chapel Hill - Durham Area

    <div id="mapid"> </div>

    <style>
        #mapid{ width: 1260px; height: 520px;}
    </style>   


    <script>
        
    var map = L.map('mapid').setView([35.94, -79.0], 12); // YOU CAN CHANGE THE ZOOM

    // Leaflet basemap variables 
    var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'});
    
    var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
	attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'});

    function circleIcon(music){
        var geojsonMarkerOptions = {
        radius: 7,
        fillColor: genre_color(music),
        color: "#000",
        weight: 1,
        opacity: 1,
        fillOpacity: 0.5
        };
        return geojsonMarkerOptions;

    }

    function genre_color(m){
        return(m == "Any") ? "#00FF00" ://Green
        (m == "Metal") ? "#FF0000" :  //Red
        (m == "Classical") ? "#FAF9F6" : //Off White
        (m == "Folk") ? "#FF69B4" : //Pink
        (m == "Indie") ? "#00FFFF" : //Cyan 
        (m == "Jazz") ? "#000FFF" : //Blue 
        (m == "Rock") ? "#FFA500" : //Orange
        (m = "EDM") ? "#FFFF00": //Yellow
        "#000000"; // Black
    }

    var myGeoJSON = L.geoJSON(concert, {
        pointToLayer: function (feature, latlng) {
        var music = feature.properties.Genre
        var description = feature.properties.Venue + "<br>Genre: " + feature.properties.Genre + "<br>" + feature.properties.Address
        return L.circleMarker(latlng, circleIcon(music)).bindPopup(description);
        }});


    // basemaps set up 
    var baseMaps = {
        "OpenStreetMap": osm,
        "ESRI" : Esri_WorldImagery
    }

    // overlayed vector data 
    var overlayMaps = {
        "Concert Venues": myGeoJSON
    }

    // created selectable layers on website
    var layerControl = L.control.layers(baseMaps, overlayMaps).addTo(map);
    // the inital layers that are viewable on website 

    osm.addTo(map);
    myGeoJSON.addTo(map);
    layerControl;
 
    </script>


    </body>

</html>